/*!
 * angular-vimeo-player
 * Philip Knape <philip.knape@gmail.com>
 * 
 * Version:  - 2015-11-25T20:28:53.434Z
 * License: ISC
 */
!function(e,t){"use strict";t.module("ngVimeo",["ngSanitize"]).config(["$sceDelegateProvider",function(e){e.resourceUrlWhitelist(["self","http://player.vimeo.com/video/*"])}]).constant("ngVimeoConfig",{method:{},event:{}}).constant("playerBaseURI","https://player.vimeo.com/video/").constant("originExpression",/^https?:\/\/player.vimeo.com/).directive("vimeoPlayer",["ngVimeoConfig","$window","$timeout","$compile",function(e,n,i,o){var r=["loadProgress","playProgress","play","pause","finish","seek"],s=["play","pause","paused","seekTo","unload","getCurrentTime","getDuration","getVideoEmbedCode","getVideoHeight","getVideoWidth","getVideoUrl","getColor","setColor","setLoop","getVolume","setVolume","addEventListener"],a={position:"relative","padding-bottom":"56.25%","padding-top":"25px",height:0},c={position:"absolute",top:0,left:0,width:"100%",height:"100%"};return{restrict:"E",replace:!0,template:"<div></div>",scope:{settings:"=",iframeId:"@",url:"@",type:"@",width:"@",height:"@",options:"@",responsive:"@"},link:function(d,l,u){function p(){b=t.extend(t.copy(e),{responsive:d.responsive||!0,id:d.id||"vimeoPlayer",src:d.src,type:d.type||"js",width:d.width,height:d.height,options:d.options},d.settings)}function v(e,t){if(!t)return"";var n=Object.keys(e).map(function(t){return t+":"+e[t]+";"}).join(" ");return' style="'+n+'" '}function f(e,t,n){e.src="https://player.vimeo.com/video/"+e.src;var i=["id","src"],o=i.map(function(t,n){return t+'="'+e[t]+'"'}).join(" ");return"<div "+n+"><iframe "+t+o+"></iframe></div>"}function m(){h(),y(!0)}function g(){h(),y()}function h(){$&&(C(r,"removeEventListener"),n.removeEventListener("message",w,!1),L.removeChild($[0]),t.element(l).css("display","none"),$=null)}function y(e){if(p(),b.haltInit&&!e)return void(b.method.setup=m);if(!b.src)return void console.warn("you need to supply a vimeo src");if(b.method.destroy=h,t.element(l).css("display","block"),i(function(){l.html(f(b,v(c,b.responsive),v(a,b.responsive))),$=o(l.contents())(d)},0),b.resize){var r=!1;r!==!1&&i.cancel(r),r=i(function(){n.on("resize",function(){console.log("resize")},200)})}V(b.method),n.addEventListener("message",w,!1)}function w(e){if(!/^https?:\/\/player.vimeo.com/.test(e.origin))return!1;"*"===k&&(k=e.origin);var t=JSON.parse(e.data);return"ready"===t.event&&C(r,"addEventListener"),"function"==typeof b.event[t.event]?b.event[t.event](e):void 0}function E(e,t){var n={method:e};t&&(n.value=t);var i=JSON.stringify(n);$.find("iframe")[0].contentWindow.postMessage(i,k)}function C(e,n){t.forEach(e,function(e,t){E(n,e)})}function V(e){d.internalControl=e||{},s.forEach(function(e){d.internalControl[e]=function(){var t;t=Array.prototype.slice.call(arguments),t.unshift(e),E(e)}})}var L=t.element(l)[0];t.element(l).css("display","none");var $,b,k="*";l.one("$destroy",function(){return h()}),d.$watch("settings",function(e){return null!==e&&void 0!==e?g():void 0},!0)}}}])}(window,window.angular);