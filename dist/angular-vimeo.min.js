/*!
 * angular-vimeo
 * Philip Knape <philip.knape@gmail.com>
 * 
 * Version:  - 2015-11-16T12:55:08.391Z
 * License: ISC
 */
!function(e,t){"use strict";t.module("ngVimeo",[]).factory("VimeoService",function(e){var t="https://www.vimeo.com/api/oembed.json";return{oEmbed:function(n){return e.jsonp(t,{params:n}).then(function(e){return e.data})}}}).constant("ngVimeoConfig",{method:{},event:{}}).directive("vimeo",["ngVimeoConfig","$window","$timeout","$compile",function(e,n,o,i){var r=["loadProgress","playProgress","play","pause","finish","seek"],s=["play","pause","paused","seekTo","unload","getCurrentTime","getDuration","getVideoEmbedCode","getVideoHeight","getVideoWidth","getVideoUrl","getColor","setColor","setLoop","getVolume","setVolume","addEventListener"];return{restrict:"E",replace:!0,template:"<div></div>",scope:{settings:"=",iframeId:"@",url:"@",type:"@",width:"@",height:"@",options:"@"},link:function(a,d,u){function c(){V=t.extend(t.copy(e),{responsive:a.responsive||!0,iframeId:a.id||"vimeoPlayer",url:a.url,type:a.type||"js",width:a.width,height:a.height,options:a.options},a.settings)}function l(){f(),v(!0)}function m(){f(),v()}function f(){E&&(h(r,"removeEventListener"),n.removeEventListener("message",p,!1),w.removeChild(E[0]),t.element(d).css("display","none"),E=null)}function v(e){if(c(),V.haltInit&&!e)return void(V.method.setup=l);if(V.method.destroy=f,t.element(d).css("display","block"),o(function(){d.html(C),E=i(d.contents())(a)},0),V.resize){var r=!1;r!==!1&&o.cancel(r),r=o(function(){n.on("resize",function(){console.log("resize")},200)})}y(V.method),n.addEventListener("message",p,!1)}function p(e){if(!/^https?:\/\/player.vimeo.com/.test(e.origin))return!1;"*"===L&&(L=e.origin);var t=JSON.parse(e.data);return"ready"===t.event&&h(r,"addEventListener"),"function"==typeof V.event[t.event]?V.event[t.event]():void 0}function g(e,t){var n={method:e};t&&(n.value=t);var o=JSON.stringify(n);E[0].contentWindow.postMessage(o,L)}function h(e,n){t.forEach(e,function(e,t){g(n,e)})}function y(e){a.internalControl=e||{},s.forEach(function(e){a.internalControl[e]=function(){var t;t=Array.prototype.slice.call(arguments),t.unshift(e),g(e)}})}var w=t.element(d)[0];t.element(d).css("display","none");var E,V,C='<iframe id="{{iframeId}}" src="https://player.vimeo.com/video/76979871"></iframe>',L="*";d.one("$destroy",function(){return f()}),a.$watch("settings",function(e){return null!==e&&void 0!==e?m():void 0},!0)}}}])}(window,window.angular);