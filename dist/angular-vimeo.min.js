/*!
 * angular-vimeo-player
 * Philip Knape <philip.knape@gmail.com>
 * 
 * Version:  - 2015-11-26T09:57:58.605Z
 * License: ISC
 */
!function(e,t){"use strict";t.module("ngVimeo",["ngSanitize"]).config(["$sceDelegateProvider",function(e){e.resourceUrlWhitelist(["self","http://player.vimeo.com/video/*"])}]).constant("ngVimeoConfig",{method:{},event:{}}).constant("playerBaseURI","https://player.vimeo.com/video/").constant("originExpression",/^https?:\/\/player.vimeo.com/).directive("vimeoPlayer",["ngVimeoConfig","$window","$timeout","$compile",function(e,n,i,o){var r=["loadProgress","playProgress","play","pause","finish","seek"],s=["play","pause","paused","seekTo","unload","getCurrentTime","getDuration","getVideoEmbedCode","getVideoHeight","getVideoWidth","getVideoUrl","getColor","setColor","setLoop","getVolume","setVolume","addEventListener"],a={position:"relative","padding-bottom":"56.25%",height:0},l={position:"absolute",top:0,left:0,width:"100%",height:"100%"};return{restrict:"E",replace:!0,template:"<div></div>",scope:{settings:"=",iframeId:"@",url:"@",type:"@",width:"@",height:"@",options:"@",responsive:"@"},link:function(c,u,d){function p(){L=t.extend(t.copy(e),{responsive:c.responsive||!0,id:c.id||"vimeoPlayer",src:c.src,type:c.type||"js",width:c.width,height:c.height,options:c.options},c.settings)}function f(e,t,n){if(!t)return"";var i=Object.keys(e).map(function(n){var i="string"==typeof t&&"padding-bottom"===n?t:e[n];return n+":"+i+";"}).join(" ");return' style="'+i+'" '}function v(e,t,n){e.src="https://player.vimeo.com/video/"+e.src;var i=["id","src","width","height","frameborder"],o=i.filter(function(t){return e[t]}).map(function(t,n){return t+'="'+e[t]+'"'}).join(" ");return"<div "+n+"><iframe "+t+o+"webkitallowfullscreen mozallowfullscreen allowfullscreen ></iframe></div>"}function m(){h(),y(!0)}function g(){h(),y()}function h(){k&&(E(r,"removeEventListener"),n.removeEventListener("message",w,!1),V.removeChild(k[0]),t.element(u).css("display","none"),b(),k=null)}function y(e){if(p(),L.haltInit&&!e)return void(L.method.setup=m);if(!L.src)return void console.warn("you need to supply a vimeo src");if(L.method.destroy=h,t.element(u).css("display","block"),i(function(){u.html(v(L,f(l,L.responsive,!0),f(a,L.responsive,!1))),k=o(u.contents())(c)},0),"function"==typeof L.event.resize){var r=!1;r!==!1&&i.cancel(r),r=i(function(){return n.on("resize",L.event.resize,200)})}b(L.method),n.addEventListener("message",w,!1)}function w(e){if(!/^https?:\/\/player.vimeo.com/.test(e.origin))return!1;"*"===$&&($=e.origin);var t=JSON.parse(e.data);return"ready"===t.event&&E(r,"addEventListener"),"function"==typeof L.event[t.event]?L.event[t.event].apply(null,Object.keys(t).map(function(e){return t[e]})):void 0}function C(e,t){var n={method:e};t&&(n.value=t);var i=JSON.stringify(n);k.find("iframe")[0].contentWindow.postMessage(i,$)}function E(e,n){t.forEach(e,function(e,t){C(n,e)})}function b(e){c.internalControl=e||{},e&&s.forEach(function(e){c.internalControl[e]=function(){if(c.internalControl[e]){var t;t=Array.prototype.slice.call(arguments),t.unshift(e),C.apply(null,t)}}})}var V=t.element(u)[0];t.element(u).css("display","none");var k,L,$="*";u.one("$destroy",function(){return h()}),c.$watch("settings",function(e){return null!==e&&void 0!==e?g():void 0},!0)}}}])}(window,window.angular);