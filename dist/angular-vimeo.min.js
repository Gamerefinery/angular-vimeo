/*!
 * angular-vimeo-player
 * Philip Knape <philip.knape@gmail.com>
 * 
 * Version:  - 2015-11-25T20:57:41.948Z
 * License: ISC
 */
!function(e,t){"use strict";t.module("ngVimeo",["ngSanitize"]).config(["$sceDelegateProvider",function(e){e.resourceUrlWhitelist(["self","http://player.vimeo.com/video/*"])}]).constant("ngVimeoConfig",{method:{},event:{}}).constant("playerBaseURI","https://player.vimeo.com/video/").constant("originExpression",/^https?:\/\/player.vimeo.com/).directive("vimeoPlayer",["ngVimeoConfig","$window","$timeout","$compile",function(e,n,i,o){var r=["loadProgress","playProgress","play","pause","finish","seek"],s=["play","pause","paused","seekTo","unload","getCurrentTime","getDuration","getVideoEmbedCode","getVideoHeight","getVideoWidth","getVideoUrl","getColor","setColor","setLoop","getVolume","setVolume","addEventListener"],a={position:"relative","padding-bottom":"56.25%",height:0},c={position:"absolute",top:0,left:0,width:"100%",height:"100%"};return{restrict:"E",replace:!0,template:"<div></div>",scope:{settings:"=",iframeId:"@",url:"@",type:"@",width:"@",height:"@",options:"@",responsive:"@"},link:function(d,u,l){function v(){$=t.extend(t.copy(e),{responsive:d.responsive||!0,id:d.id||"vimeoPlayer",src:d.src,type:d.type||"js",width:d.width,height:d.height,options:d.options},d.settings)}function p(e,t,n){if(!t)return"";var i=Object.keys(e).map(function(n){var i="string"==typeof t&&"padding-bottom"===n?t:e[n];return n+":"+i+";"}).join(" ");return' style="'+i+'" '}function f(e,t,n){e.src="https://player.vimeo.com/video/"+e.src;var i=["id","src"],o=i.map(function(t,n){return t+'="'+e[t]+'"'}).join(" ");return"<div "+n+"><iframe "+t+o+"></iframe></div>"}function m(){h(),y(!0)}function g(){h(),y()}function h(){L&&(C(r,"removeEventListener"),n.removeEventListener("message",w,!1),b.removeChild(L[0]),t.element(u).css("display","none"),L=null)}function y(e){if(v(),$.haltInit&&!e)return void($.method.setup=m);if(!$.src)return void console.warn("you need to supply a vimeo src");if($.method.destroy=h,t.element(u).css("display","block"),i(function(){u.html(f($,p(c,$.responsive,!0),p(a,$.responsive,!1))),L=o(u.contents())(d)},0),"function"==typeof $.event.resize){var r=!1;r!==!1&&i.cancel(r),r=i(function(){return n.on("resize",$.event.resize,200)})}V($.method),n.addEventListener("message",w,!1)}function w(e){if(!/^https?:\/\/player.vimeo.com/.test(e.origin))return!1;"*"===k&&(k=e.origin);var t=JSON.parse(e.data);return"ready"===t.event&&C(r,"addEventListener"),"function"==typeof $.event[t.event]?$.event[t.event](e):void 0}function E(e,t){var n={method:e};t&&(n.value=t);var i=JSON.stringify(n);L.find("iframe")[0].contentWindow.postMessage(i,k)}function C(e,n){t.forEach(e,function(e,t){E(n,e)})}function V(e){d.internalControl=e||{},s.forEach(function(e){d.internalControl[e]=function(){var t;t=Array.prototype.slice.call(arguments),t.unshift(e),E(e)}})}var b=t.element(u)[0];t.element(u).css("display","none");var L,$,k="*";u.one("$destroy",function(){return h()}),d.$watch("settings",function(e){return null!==e&&void 0!==e?g():void 0},!0)}}}])}(window,window.angular);