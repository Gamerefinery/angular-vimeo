/*!
 * angular-vimeo
 * Philip Knape <philip.knape@gmail.com>
 * 
 * Version:  - 2015-11-16T13:28:15.697Z
 * License: ISC
 */
!function(e,n){"use strict";n.module("ngVimeo",[]).factory("VimeoService",function(e){var n="https://www.vimeo.com/api/oembed.json";return{oEmbed:function(t){return e.jsonp(n,{params:t}).then(function(e){return e.data})}}}).constant("ngVimeoConfig",{method:{},event:{}}).directive("vimeo",["ngVimeoConfig","$window","$timeout","$compile",function(e,t,o,i){var r=["loadProgress","playProgress","play","pause","finish","seek"],s=["play","pause","paused","seekTo","unload","getCurrentTime","getDuration","getVideoEmbedCode","getVideoHeight","getVideoWidth","getVideoUrl","getColor","setColor","setLoop","getVolume","setVolume","addEventListener"];return{restrict:"E",replace:!0,template:"<div></div>",scope:{settings:"=",iframeId:"@",url:"@",type:"@",width:"@",height:"@",options:"@"},link:function(a,c,u){function d(){C=n.extend(n.copy(e),{responsive:a.responsive||!0,id:a.id||"vimeoPlayer",src:a.src,type:a.type||"js",width:a.width,height:a.height,options:a.options},a.settings)}function l(e){e.src="https://player.vimeo.com/video/"+e.src;var n=["id","src"],t=n.map(function(n,t){return n+'="'+e[n]+'"'}).join(" ");return"<iframe "+t+"></iframe>"}function m(){f(),p(!0)}function v(){f(),p()}function f(){V&&(y(r,"removeEventListener"),t.removeEventListener("message",g,!1),E.removeChild(V[0]),n.element(c).css("display","none"),V=null)}function p(e){if(d(),C.haltInit&&!e)return void(C.method.setup=m);if(!C.src)return void console.warn("you need to supply a vimeo src");if(C.method.destroy=f,n.element(c).css("display","block"),o(function(){c.html(l(C)),V=i(c.contents())(a)},0),C.resize){var r=!1;r!==!1&&o.cancel(r),r=o(function(){t.on("resize",function(){console.log("resize")},200)})}w(C.method),t.addEventListener("message",g,!1)}function g(e){if(!/^https?:\/\/player.vimeo.com/.test(e.origin))return!1;"*"===L&&(L=e.origin);var n=JSON.parse(e.data);return"ready"===n.event&&y(r,"addEventListener"),"function"==typeof C.event[n.event]?C.event[n.event]():void 0}function h(e,n){var t={method:e};n&&(t.value=n);var o=JSON.stringify(t);V[0].contentWindow.postMessage(o,L)}function y(e,t){n.forEach(e,function(e,n){h(t,e)})}function w(e){a.internalControl=e||{},s.forEach(function(e){a.internalControl[e]=function(){var n;n=Array.prototype.slice.call(arguments),n.unshift(e),h(e)}})}var E=n.element(c)[0];n.element(c).css("display","none");var V,C,L="*";c.one("$destroy",function(){return f()}),a.$watch("settings",function(e){return null!==e&&void 0!==e?v():void 0},!0)}}}])}(window,window.angular);