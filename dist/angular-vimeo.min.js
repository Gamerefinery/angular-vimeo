/*!
 * angular-vimeo-player
 * Philip Knape <philip.knape@gmail.com>
 * 
 * Version:  - 2015-11-17T16:56:01.135Z
 * License: ISC
 */
!function(e,t){"use strict";t.module("ngVimeo",[]).factory("VimeoService",function(e){var t="https://www.vimeo.com/api/oembed.json";return{oEmbed:function(n){return e.jsonp(t,{params:n}).then(function(e){return e.data})}}}).constant("ngVimeoConfig",{method:{},event:{}}).constant("playerBaseURI","https://player.vimeo.com/video/").constant("originExpression",/^https?:\/\/player.vimeo.com/).directive("vimeoPlayer",["ngVimeoConfig","$window","$timeout","$compile",function(e,n,o,i){var r=["loadProgress","playProgress","play","pause","finish","seek"],s=["play","pause","paused","seekTo","unload","getCurrentTime","getDuration","getVideoEmbedCode","getVideoHeight","getVideoWidth","getVideoUrl","getColor","setColor","setLoop","getVolume","setVolume","addEventListener"];return{restrict:"E",replace:!0,template:"<div></div>",scope:{settings:"=",iframeId:"@",url:"@",type:"@",width:"@",height:"@",options:"@"},link:function(a,c,u){function d(){C=t.extend(t.copy(e),{responsive:a.responsive||!0,id:a.id||"vimeoPlayer",src:a.src,type:a.type||"js",width:a.width,height:a.height,options:a.options},a.settings)}function l(e){e.src="https://player.vimeo.com/video/"+e.src;var t=["id","src"],n=t.map(function(t,n){return t+'="'+e[t]+'"'}).join(" ");return"<iframe "+n+"></iframe>"}function m(){v(),f(!0)}function p(){v(),f()}function v(){V&&(y(r,"removeEventListener"),n.removeEventListener("message",g,!1),E.removeChild(V[0]),t.element(c).css("display","none"),V=null)}function f(e){if(d(),C.haltInit&&!e)return void(C.method.setup=m);if(!C.src)return void console.warn("you need to supply a vimeo src");if(C.method.destroy=v,t.element(c).css("display","block"),o(function(){c.html(l(C)),V=i(c.contents())(a)},0),C.resize){var r=!1;r!==!1&&o.cancel(r),r=o(function(){n.on("resize",function(){console.log("resize")},200)})}w(C.method),n.addEventListener("message",g,!1)}function g(e){if(!/^https?:\/\/player.vimeo.com/.test(e.origin))return!1;"*"===L&&(L=e.origin);var t=JSON.parse(e.data);return"ready"===t.event&&y(r,"addEventListener"),"function"==typeof C.event[t.event]?C.event[t.event]():void 0}function h(e,t){var n={method:e};t&&(n.value=t);var o=JSON.stringify(n);V[0].contentWindow.postMessage(o,L)}function y(e,n){t.forEach(e,function(e,t){h(n,e)})}function w(e){a.internalControl=e||{},s.forEach(function(e){a.internalControl[e]=function(){var t;t=Array.prototype.slice.call(arguments),t.unshift(e),h(e)}})}var E=t.element(c)[0];t.element(c).css("display","none");var V,C,L="*";c.one("$destroy",function(){return v()}),a.$watch("settings",function(e){return null!==e&&void 0!==e?p():void 0},!0)}}}])}(window,window.angular);